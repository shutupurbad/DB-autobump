var version = "3.5.0";

function redirect() {
      return {
        redirectUrl: "data:application/javascript;base64,InVzZSBzdHJpY3QiO1N0cmluZy5wcm90b3R5cGUuaXNEaXNjb3JkSUQ9ZnVuY3Rpb24oKXtyZXR1cm4vWzAtOV17MTcsMTh9Ly50ZXN0KHRoaXMudG9TdHJpbmcoKSl9LFN0cmluZy5wcm90b3R5cGUuZ2V0SW52aXRlQ29kZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMudG9TdHJpbmcoKS5tYXRjaCgvXmh0dHBzPzpcL1wvKGRpc2NvcmRcLmNvbVwvaW52aXRlXC98ZGlzY29yZGFwcFwuY29tXC9pbnZpdGVcL3xkaXNjb3JkXC5nZ1wvKShbXHdcLV0rKSQvaSk7cmV0dXJuIGU/ZVsyXTpudWxsfSwkKGZ1bmN0aW9uKCl7d2luZG93LmRpc2JvYXJkPXt9LHByZXBhcmVOYXZiYXIoKSxwcmVwYXJlRHJvcGRvd24oKSxtb2RhbCgpfSksd2luZG93LnByZXBhcmVNdXRlU2VydmVyPWZ1bmN0aW9uKG8sYSl7aWYod2luZG93LmRpc2JvYXJkLm11dGVTZXJ2ZXJQcmVwYXJlZClyZXR1cm4hMTt3aW5kb3cuZGlzYm9hcmQubXV0ZVNlcnZlclByZXBhcmVkPSEwLGE9YXx8IlVubXV0ZSIsJCgiLmJ1dHRvbi1tdXRlLXNlcnZlciIpLmNsaWNrKGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgbj0kKHRoaXMpLmF0dHIoImRhdGEtc2VydmVyLWlkIiksdD1vKyIvIituOyQucG9zdCh0KS5kb25lKGZ1bmN0aW9uKGUpe3ZhciB0PSQoIi5zZXJ2ZXItIituKTtlLnJlc3VsdCYmKG5vdGllLmFsZXJ0KHt0eXBlOiJzdWNjZXNzIix0ZXh0OmUubWVzc2FnZX0pLHQuaHRtbCgnPGRpdiBjbGFzcz0ibXV0ZWQtc3VjY2Vzc2Z1bGx5IGhhcy10ZXh0LWNlbnRlcmVkIj48YnV0dG9uIGNsYXNzPSJidXR0b24gaXMtZGFyayBidXR0b24tdW5tdXRlLXNlcnZlciIgZGF0YS1zZXJ2ZXItaWQ9IicrbisnIj4nK2ErIjwvYnV0dG9uPjwvZGl2PiIpKX0pLmZhaWwoZnVuY3Rpb24oZSl7bm90aWUuYWxlcnQoe3R5cGU6ImVycm9yIix0ZXh0OmUucmVzcG9uc2VKU09OLm1lc3NhZ2V9KX0pfSksJChkb2N1bWVudCkub24oImNsaWNrIiwiLmJ1dHRvbi11bm11dGUtc2VydmVyIixmdW5jdGlvbihlKXt2YXIgdD0kKHRoaXMpLG49dC5hdHRyKCJkYXRhLXNlcnZlci1pZCIpLGE9bysiLyIrbisiP3VubXV0ZT0xIjskLnBvc3QoYSxmdW5jdGlvbihlKXt0LmhpZGUoKSxub3RpZS5hbGVydCh7dHlwZToic3VjY2VzcyIsdGV4dDplLm1lc3NhZ2V9KX0pfSl9LHdpbmRvdy5wcmVwYXJlTmF2YmFyPWZ1bmN0aW9uKCl7aWYod2luZG93LmRpc2JvYXJkLm5hdmJhclByZXBhcmVkKXJldHVybiExO3dpbmRvdy5kaXNib2FyZC5uYXZiYXJQcmVwYXJlZD0hMDtmdW5jdGlvbiBlKGUpe3ZhciB0PSQoZSkuc2Nyb2xsVG9wKCkvMTAwOyQoIiNoZWFkZXI6bm90KC5oYXMtbWVudS1vcGVuZWQpIikuY3NzKHtiYWNrZ3JvdW5kOiJyZ2JhKDU0LCA2MiwgODksIit0KyIpIiwiYmFja2Ryb3AtZmlsdGVyIjoiYmx1cigiK3QrInB4KSJ9KX0kKGRvY3VtZW50KS5zY3JvbGwoZnVuY3Rpb24oKXtlKHRoaXMpfSkucmVhZHkoZnVuY3Rpb24oKXtlKHRoaXMpfSksJCgiLm5hdmJhci1idXJnZXIiKS5jbGljayhmdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpLCQoIi5uYXZiYXIiKS50b2dnbGVDbGFzcygiaGFzLW1lbnUtb3BlbmVkIiksJCgiLm5hdmJhci1tZW51IikudG9nZ2xlQ2xhc3MoImlzLWFjdGl2ZSIpfSksJCgiLm5hdmJhci1tZW51IikuY2xpY2soZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX0pLCQoImh0bWwiKS5jbGljayhmdW5jdGlvbigpeyQoIi5uYXZiYXIiKS5yZW1vdmVDbGFzcygiaGFzLW1lbnUtb3BlbmVkIiksJCgiLm5hdmJhci1tZW51IikucmVtb3ZlQ2xhc3MoImlzLWFjdGl2ZSIpfSl9O3ZhciBtb2RhbD1mdW5jdGlvbigpeyQoIi5idXR0b24tbW9kYWwiKS5jbGljayhmdW5jdGlvbigpe3ZhciBlPSQodGhpcykuZGF0YSgidGFyZ2V0Iik7JChlKS5hZGRDbGFzcygiaXMtYWN0aXZlIil9KSwkKCIubW9kYWwtY2xvc2UsIC5tb2RhbC1iYWNrZ3JvdW5kLCAubW9kYWwgLmJ1dHRvbiIpLm5vdCgiLmJ1dHRvblt0eXBlPXN1Ym1pdF0iKS5jbGljayhmdW5jdGlvbigpeyQoIi5tb2RhbCIpLnJlbW92ZUNsYXNzKCJpcy1hY3RpdmUiKX0pfTt3aW5kb3cucHJlcGFyZURyb3Bkb3duPWZ1bmN0aW9uKCl7JChkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24oKXskKCIuZHJvcGRvd24iKS5yZW1vdmVDbGFzcygiaXMtYWN0aXZlIil9KSwkKCIubGlzdGluZy1jYXJkIikub24oIm1vdXNlbGVhdmUiLGZ1bmN0aW9uKGUpeyQodGhpcykuZmluZCgiLmRyb3Bkb3duIikucmVtb3ZlQ2xhc3MoImlzLWFjdGl2ZSIpfSksJCgiLmRyb3Bkb3duOm5vdCguaXMtaG92ZXJhYmxlKSIpLmNsaWNrKGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksJCh0aGlzKS50b2dnbGVDbGFzcygiaXMtYWN0aXZlIil9KX0sd2luZG93LnByZXBhcmVFbGFzdGljVGV4dD1mdW5jdGlvbigpe2lmKHdpbmRvdy5kaXNib2FyZC5lbGFzdGljVGV4dFByZXBhcmVkKXJldHVybiExO3dpbmRvdy5kaXNib2FyZC5lbGFzdGljVGV4dFByZXBhcmVkPSEwO2Zvcih2YXIgZT0kKCIuaXMtZWxhc3RpYy10ZXh0IiksdD0wLG49ZS5sZW5ndGg7dDxuO3QrKyl7dmFyIGE9JChlW3RdKSxvPWEuaGVpZ2h0KCkscj1hLmF0dHIoImRhdGEtZXQtbWF4LWhlaWdodCIpO2lmKHIpdmFyIGk9cjtlbHNlIGk9MjQwO288MjQwfHxhLmFkZENsYXNzKCJsb25nIikuYXR0cigiZGF0YS1vcmlnaW4taGVpZ2h0IixhLmhlaWdodCgpKS5oZWlnaHQoaSkuYXBwZW5kKCQoJyAgICAgICA8ZGl2IGNsYXNzPSJyZWFkLW1vcmUiIGFyaWEtbGFiZWw9IlJlYWQgbW9yZSI+ICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iPiAgICAgICAgICAgPGkgY2xhc3M9Imljb24gaWNvbi1jaGV2cm9uLWRvd24iPjwvaT4gICAgICAgICAgIDxpIGNsYXNzPSJpY29uIGljb24tY2hldnJvbi11cCI+PC9pPiAgICAgICAgIDwvYnV0dG9uPiAgICAgICA8L2Rpdj4gICAgICAgJykuY2xpY2soZnVuY3Rpb24oKXt2YXIgZT0kKHRoaXMpLnBhcmVudCgpLHQ9ZS5hdHRyKCJkYXRhLW9yaWdpbi1oZWlnaHQiKTtlLmhhc0NsYXNzKCJldC1leHBhbmRlZCIpP2UuaGVpZ2h0KGkpLnJlbW92ZUNsYXNzKCJldC1leHBhbmRlZCIpOmUuaGVpZ2h0KHQpLmFkZENsYXNzKCJldC1leHBhbmRlZCIpfSkpfX0sd2luZG93LnByZXBhcmVUaHVtYnM9ZnVuY3Rpb24oaSl7JCgiLmJ1dHRvbi10aHVtYnMtdXAsIC5idXR0b24tdGh1bWJzLWRvd24iKS5jbGljayhmdW5jdGlvbihlKXtpZihlLm9yaWdpbmFsRXZlbnQuaXNUcnVzdGVkKXt2YXIgdD0kKHRoaXMpLG49dC5wYXJlbnQoKSxhPXQuaGFzQ2xhc3MoImJ1dHRvbi10aHVtYnMtdXAiKSxvPXQuZGF0YSgiaWQiKSxyPWkrIi8iK287YXx8KHIrPSI/bGlrZT0wIiksJC5wb3N0KHIsZnVuY3Rpb24oZSl7ImRlbGV0ZSI9PWUucmVzdWx0P24ucmVtb3ZlQ2xhc3MoInByZXNzZWQiKToobi5hZGRDbGFzcygicHJlc3NlZCIpLG4uZmluZCgiYnV0dG9uIikucmVtb3ZlQ2xhc3MoIm9uIiksdC5hZGRDbGFzcygib24iKSl9KX19KX0sd2luZG93LnByZXBhcmVTZWFyY2g9ZnVuY3Rpb24oYSl7dmFyIGU9YS5kYXRhKCJyZW1vdGUtdXJsIiksdD1uZXcgQmxvb2Rob3VuZCh7ZGF0dW1Ub2tlbml6ZXI6Qmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2UscXVlcnlUb2tlbml6ZXI6Qmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2UscmVtb3RlOnt1cmw6ZSsiP3E9JVFVRVJZIix3aWxkY2FyZDoiJVFVRVJZIn19KTthLnR5cGVhaGVhZCh7aGludDohMCxoaWdobGlnaHQ6ITAsbWluTGVuZ3RoOjJ9LHtzb3VyY2U6dCxkaXNwbGF5OiJuYW1lIix0ZW1wbGF0ZXM6e3N1Z2dlc3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuJzxkaXY+PHNwYW4gY2xhc3M9InN1Z2dlc3Rpb24tbmFtZSI+JytlLm5hbWUrJzwvc3Bhbj48c3BhbiBjbGFzcz0ic3VnZ2VzdGlvbi1jb3VudCI+KCcrZS5jb3VudCsiKTwvc3Bhbj48L2Rpdj4ifX19KSxhLmJpbmQoInR5cGVhaGVhZDpzZWxlY3QiLGZ1bmN0aW9uKGUsdCl7dmFyIG49dC5uYW1lOyQuYWpheCh7bWV0aG9kOiJQT1NUIix1cmw6Ii9sb2cvc2VhcmNoIixkYXRhOntxdWVyeTpuLHN1Z2dlc3RlZDoxfX0pLmRvbmUoZnVuY3Rpb24oZSl7bG9jYXRpb24uaHJlZj0iL3NlcnZlcnMvdGFnLyIrbn0pfSksJCgiLmZvcm0tc2VhcmNoIikuc3VibWl0KGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3ZhciB0PWEudmFsKCksbj10aGlzOyQuYWpheCh7bWV0aG9kOiJQT1NUIix1cmw6Ii9sb2cvc2VhcmNoIixkYXRhOntxdWVyeTp0fX0pLmRvbmUoZnVuY3Rpb24oZSl7bi5zdWJtaXQoKX0pfSl9LHdpbmRvdy5wcmVwYXJlU2hhcmVCdXR0b25zPWZ1bmN0aW9uKCl7dmFyIHQ9JCgiLnNoYXJlLWJ1dHRvbnMiKTskKGRvY3VtZW50KS5zY3JvbGwoZnVuY3Rpb24oKXshZnVuY3Rpb24oZSl7MTIwPCQoZSkuc2Nyb2xsVG9wKCk/dC5hZGRDbGFzcygic2Nyb2xsZWQiKTp0LnJlbW92ZUNsYXNzKCJzY3JvbGxlZCIpfSh0aGlzKX0pfSx3aW5kb3cucHJlcGFyZUJ1bXBCdXR0b249ZnVuY3Rpb24oaSxzKXtmdW5jdGlvbiBkKGUsdCl7dmFyIG49TWF0aC5mbG9vcihlJTg2NDAwLzM2MDApLGE9TWF0aC5mbG9vcihlJTM2MDAvNjApLG89TWF0aC5mbG9vcihlJTYwKTtuPW48MTA/IjAiK246bixhPWE8MTA/IjAiK2E6YSxvPW88MTA/IjAiK286byx0LnRleHQobisiOiIrYSsiOiIrbyl9JCgiLmJ1dHRvbi1idW1wIikuZWFjaChmdW5jdGlvbihlLHQpe3ZhciBuPSh0PSQodCkpLmF0dHIoImRhdGEtcmVtYWluaW5nIik7aWYobil7dmFyIGE9dC5maW5kKCIudGV4dCIpLG89YS5hdHRyKCJkYXRhLW9yaWdpbi10ZXh0Iik7dC5hdHRyKCJkaXNhYmxlZCIsITApLGQobixhKTt2YXIgcj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2Qobi09MSxhKSxuPD0wJiYodC5hdHRyKCJkaXNhYmxlZCIsITEpLGEudGV4dChvKSxjbGVhckludGVydmFsKHIpKX0sMWUzKX10LmNsaWNrKGZ1bmN0aW9uKGUpe2lmKGUucHJldmVudERlZmF1bHQoKSx0cnVlKXt2YXIgYT0kKHRoaXMpO2dyZWNhcHRjaGEuZXhlY3V0ZShpLHthY3Rpb246InNlcnZlci9idW1wIn0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9YS5hdHRyKCJocmVmIiksbj10K3Quc3Vic3RyaW5nKDAsdC5pbmRleE9mKCI/IikpKyI/IitzKyI9IitlO2xvY2F0aW9uLmhyZWY9bn0pfX0pfSl9LHdpbmRvdy5sb2dKb2luPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O3Q9dm9pZCAwIT09d2luZG93LmRpc2JvYXJkLmpvaW5Mb2dQYXJhbXM/d2luZG93LmRpc2JvYXJkLmpvaW5Mb2dQYXJhbXM6e3BhZ2U6bnVsbCxmcm9tOm51bGwsa2V5d29yZDpudWxsfTt2YXIgbj1lLmdldEF0dHJpYnV0ZSgiZGF0YS1pZCIpLGE9ZS5nZXRBdHRyaWJ1dGUoImRhdGEtcmFuayIpLG89dC5wYWdlLHI9dC5mcm9tLGk9dC5rZXl3b3JkLHM9e3NlcnZlcl9pZDpuLHBhdGg6ZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUscGFyYW1zOmRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCxyYW5rOmEscGFnZTpvLGZyb206cixrZXl3b3JkOml9OyQuYWpheCh7bWV0aG9kOiJQT1NUIix1cmw6Ii9sb2cvam9pbiIsZGF0YTpzfSksZ2EoInNlbmQiLCJldmVudCIsIk91dGJvdW5kIExpbmtzIiwiRGlzY29yZCBJbnZpdGUiLG4sYSl9LHdpbmRvdy5leGVjQ29weT1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInByZSIpKS50ZXh0Q29udGVudD1lO3ZhciBuPXQuc3R5bGU7bi5wb3NpdGlvbj0iZml4ZWQiLG4ubGVmdD0iLTEwMCUiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCksZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0QWxsQ2hpbGRyZW4odCk7dmFyIGE9ZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTtyZXR1cm4gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0KSxhfTsKIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMubm90aWU9dCgpOmUubm90aWU9dCgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGE9e30scy5tPW49W2Z1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlLndlYnBhY2tQb2x5ZmlsbHx8KGUuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSxlLnBhdGhzPVtdLGUuY2hpbGRyZW58fChlLmNoaWxkcmVuPVtdKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwibG9hZGVkIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5sfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJpZCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuaX19KSxlLndlYnBhY2tQb2x5ZmlsbD0xKSxlfX0sZnVuY3Rpb24oZSxpLHQpeyJ1c2Ugc3RyaWN0IjsoZnVuY3Rpb24oZSl7dmFyIHQsbixzLGEsYj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgZX07YT1mdW5jdGlvbigpe3JldHVybiBhPXt9LHMubT1uPVtmdW5jdGlvbihlLHQsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2Z1bmN0aW9uIHMoKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSwwKX0pfWZ1bmN0aW9uIHAodCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3JldHVybiBzZXRUaW1lb3V0KGUsMWUzKnQpfSl9ZnVuY3Rpb24gaigpe2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpfWZ1bmN0aW9uIE4oKXtyZXR1cm4ibm90aWUtIisieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Ii5yZXBsYWNlKC9beHldL2csZnVuY3Rpb24oZSl7dmFyIHQ9MTYqTWF0aC5yYW5kb20oKXwwO3JldHVybigieCI9PT1lP3Q6MyZ0fDgpLnRvU3RyaW5nKDE2KX0pfWZ1bmN0aW9uIGEoKXtyZXR1cm4gVS50cmFuc2l0aW9uU2VsZWN0b3IrIiAiK1UudHJhbnNpdGlvbkR1cmF0aW9uKyJzICIrVS50cmFuc2l0aW9uQ3VydmV9ZnVuY3Rpb24gUChlKXtyZXR1cm4gMTM9PT1lLmtleUNvZGV9ZnVuY3Rpb24gRihlKXtyZXR1cm4gMjc9PT1lLmtleUNvZGV9ZnVuY3Rpb24gWShlLHQpe2UuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuY29udGFpbmVyKSxlLnN0eWxlW3RdPSItMTAwMDBweCIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKSxlLnN0eWxlW3RdPSItIitlLm9mZnNldEhlaWdodCsicHgiLGUubGlzdGVuZXImJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIixlLmxpc3RlbmVyKSxzKCkudGhlbihmdW5jdGlvbigpe2Uuc3R5bGUudHJhbnNpdGlvbj1hKCksZS5zdHlsZVt0XT0wfSl9ZnVuY3Rpb24gXyhlLHQpe3ZhciBuPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO24mJihuLnN0eWxlW3RdPSItIituLm9mZnNldEhlaWdodCsicHgiLG4ubGlzdGVuZXImJndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIixuLmxpc3RlbmVyKSxwKFUudHJhbnNpdGlvbkR1cmF0aW9uKS50aGVuKGZ1bmN0aW9uKCl7bi5wYXJlbnROb2RlJiZuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobil9KSl9ZnVuY3Rpb24geihlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO24uaWQ9VS5pZHMub3ZlcmxheSxuLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLm92ZXJsYXkpLG4uY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYmFja2dyb3VuZE92ZXJsYXkpLG4uc3R5bGUub3BhY2l0eT0wLGUmJlUub3ZlcmxheUNsaWNrRGlzbWlzcyYmKG4ub25jbGljaz1mdW5jdGlvbigpe18oZS5pZCx0KSxCKCl9KSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLHMoKS50aGVuKGZ1bmN0aW9uKCl7bi5zdHlsZS50cmFuc2l0aW9uPWEoKSxuLnN0eWxlLm9wYWNpdHk9VS5vdmVybGF5T3BhY2l0eX0pfWZ1bmN0aW9uIGkoZSx0LG4pe3ZhciBzPWUudGV4dCxhPWUuc3VibWl0VGV4dCxpPXZvaWQgMD09PWE/IlN1Ym1pdCI6YSxjPWUuY2FuY2VsVGV4dCxvPXZvaWQgMD09PWM/IkNhbmNlbCI6YyxyPWUuc3VibWl0Q2FsbGJhY2ssbD1lLmNhbmNlbENhbGxiYWNrLGQ9ZS5wb3NpdGlvbix1PXZvaWQgMD09PWQ/VS5wb3NpdGlvbnMuaW5wdXR8fHUudG9wOmQscD1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgcyBpbiBlKTA8PXQuaW5kZXhPZihzKXx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscykmJihuW3NdPWVbc10pO3JldHVybiBufShlLFsidGV4dCIsInN1Ym1pdFRleHQiLCJjYW5jZWxUZXh0Iiwic3VibWl0Q2FsbGJhY2siLCJjYW5jZWxDYWxsYmFjayIsInBvc2l0aW9uIl0pO2ooKSxKKCk7dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksbT1OKCk7Zi5pZD1tO3ZhciB2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3YuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMudGV4dGJveCksdi5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5iYWNrZ3JvdW5kSW5mbyksdi5pbm5lckhUTUw9JzxkaXYgY2xhc3M9IicrVS5jbGFzc2VzLnRleHRib3hJbm5lcisnIj4nK3MrIjwvZGl2PiI7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmlucHV0RmllbGQpLGIuc2V0QXR0cmlidXRlKCJhdXRvY2FwaXRhbGl6ZSIscC5hdXRvY2FwaXRhbGl6ZXx8Im5vbmUiKSxiLnNldEF0dHJpYnV0ZSgiYXV0b2NvbXBsZXRlIixwLmF1dG9jb21wbGV0ZXx8Im9mZiIpLGIuc2V0QXR0cmlidXRlKCJhdXRvY29ycmVjdCIscC5hdXRvY29ycmVjdHx8Im9mZiIpLGIuc2V0QXR0cmlidXRlKCJhdXRvZm9jdXMiLHAuYXV0b2ZvY3VzfHwidHJ1ZSIpLGIuc2V0QXR0cmlidXRlKCJpbnB1dG1vZGUiLHAuaW5wdXRtb2RlfHwidmVyYmF0aW0iKSxiLnNldEF0dHJpYnV0ZSgibWF4IixwLm1heHx8IiIpLGIuc2V0QXR0cmlidXRlKCJtYXhsZW5ndGgiLHAubWF4bGVuZ3RofHwiIiksYi5zZXRBdHRyaWJ1dGUoIm1pbiIscC5taW58fCIiKSxiLnNldEF0dHJpYnV0ZSgibWlubGVuZ3RoIixwLm1pbmxlbmd0aHx8IiIpLGIuc2V0QXR0cmlidXRlKCJwbGFjZWhvbGRlciIscC5wbGFjZWhvbGRlcnx8IiIpLGIuc2V0QXR0cmlidXRlKCJzcGVsbGNoZWNrIixwLnNwZWxsY2hlY2t8fCJkZWZhdWx0IiksYi5zZXRBdHRyaWJ1dGUoInN0ZXAiLHAuc3RlcHx8ImFueSIpLGIuc2V0QXR0cmlidXRlKCJ0eXBlIixwLnR5cGV8fCJ0ZXh0IiksYi52YWx1ZT1wLnZhbHVlfHwiIixwLmFsbG93ZWQmJihiLm9uaW5wdXQ9ZnVuY3Rpb24oKXt2YXIgZT12b2lkIDA7aWYoQXJyYXkuaXNBcnJheShwLmFsbG93ZWQpKXtmb3IodmFyIHQ9IiIsbj1wLmFsbG93ZWQscz0wO3M8bi5sZW5ndGg7cysrKSJhbiI9PT1uW3NdP3QrPSIwLTlhLXpBLVoiOiJhIj09PW5bc10/dCs9ImEtekEtWiI6Im4iPT09bltzXSYmKHQrPSIwLTkiKSwicyI9PT1uW3NdJiYodCs9IiAiKTtlPW5ldyBSZWdFeHAoIlteIit0KyJdIiwiZyIpfWVsc2Uib2JqZWN0Ij09PUwocC5hbGxvd2VkKSYmKGU9cC5hbGxvd2VkKTtiLnZhbHVlPWIudmFsdWUucmVwbGFjZShlLCIiKX0pO3ZhciB4PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3guY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYnV0dG9uKSx4LmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmVsZW1lbnRIYWxmKSx4LmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmJhY2tncm91bmRTdWNjZXNzKSx4LmlubmVySFRNTD1pLHgub25jbGljaz1mdW5jdGlvbigpe18obSx1KSxCKCkscj9yKGIudmFsdWUpOnQmJnQoYi52YWx1ZSl9O3ZhciB5PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3kuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYnV0dG9uKSx5LmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmVsZW1lbnRIYWxmKSx5LmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmJhY2tncm91bmRFcnJvcikseS5pbm5lckhUTUw9byx5Lm9uY2xpY2s9ZnVuY3Rpb24oKXtfKG0sdSksQigpLGw/bChiLnZhbHVlKTpuJiZuKGIudmFsdWUpfSxmLmFwcGVuZENoaWxkKHYpLGYuYXBwZW5kQ2hpbGQoYiksZi5hcHBlbmRDaGlsZCh4KSxmLmFwcGVuZENoaWxkKHkpLGYubGlzdGVuZXI9ZnVuY3Rpb24oZSl7UChlKT94LmNsaWNrKCk6RihlKSYmeS5jbGljaygpfSxZKGYsdSksYi5mb2N1cygpLHooZix1KX12YXIgTD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09PWIoU3ltYm9sLml0ZXJhdG9yKT9mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT8idW5kZWZpbmVkIjpiKGUpfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dm9pZCAwPT09ZT8idW5kZWZpbmVkIjpiKGUpfSxjPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtmb3IodmFyIHMgaW4gbilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixzKSYmKGVbc109bltzXSl9cmV0dXJuIGV9LG89InRvcCIsVT17YWxlcnRUaW1lOjMsZGF0ZU1vbnRoczpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sb3ZlcmxheUNsaWNrRGlzbWlzczohMCxvdmVybGF5T3BhY2l0eTouNzUsdHJhbnNpdGlvbkN1cnZlOiJlYXNlIix0cmFuc2l0aW9uRHVyYXRpb246LjMsdHJhbnNpdGlvblNlbGVjdG9yOiJhbGwiLGNsYXNzZXM6e2NvbnRhaW5lcjoibm90aWUtY29udGFpbmVyIix0ZXh0Ym94OiJub3RpZS10ZXh0Ym94Iix0ZXh0Ym94SW5uZXI6Im5vdGllLXRleHRib3gtaW5uZXIiLGJ1dHRvbjoibm90aWUtYnV0dG9uIixlbGVtZW50OiJub3RpZS1lbGVtZW50IixlbGVtZW50SGFsZjoibm90aWUtZWxlbWVudC1oYWxmIixlbGVtZW50VGhpcmQ6Im5vdGllLWVsZW1lbnQtdGhpcmQiLG92ZXJsYXk6Im5vdGllLW92ZXJsYXkiLGJhY2tncm91bmRTdWNjZXNzOiJub3RpZS1iYWNrZ3JvdW5kLXN1Y2Nlc3MiLGJhY2tncm91bmRXYXJuaW5nOiJub3RpZS1iYWNrZ3JvdW5kLXdhcm5pbmciLGJhY2tncm91bmRFcnJvcjoibm90aWUtYmFja2dyb3VuZC1lcnJvciIsYmFja2dyb3VuZEluZm86Im5vdGllLWJhY2tncm91bmQtaW5mbyIsYmFja2dyb3VuZE5ldXRyYWw6Im5vdGllLWJhY2tncm91bmQtbmV1dHJhbCIsYmFja2dyb3VuZE92ZXJsYXk6Im5vdGllLWJhY2tncm91bmQtb3ZlcmxheSIsYWxlcnQ6Im5vdGllLWFsZXJ0IixpbnB1dEZpZWxkOiJub3RpZS1pbnB1dC1maWVsZCIsc2VsZWN0Q2hvaWNlUmVwZWF0ZWQ6Im5vdGllLXNlbGVjdC1jaG9pY2UtcmVwZWF0ZWQiLGRhdGVTZWxlY3RvcklubmVyOiJub3RpZS1kYXRlLXNlbGVjdG9yLWlubmVyIixkYXRlU2VsZWN0b3JVcDoibm90aWUtZGF0ZS1zZWxlY3Rvci11cCJ9LGlkczp7b3ZlcmxheToibm90aWUtb3ZlcmxheSJ9LHBvc2l0aW9uczp7YWxlcnQ6byxmb3JjZTpvLGNvbmZpcm06byxpbnB1dDpvLHNlbGVjdDoiYm90dG9tIixkYXRlOm99fSxyPXQuc2V0T3B0aW9ucz1mdW5jdGlvbihlKXtVPWMoe30sVSxlLHtjbGFzc2VzOmMoe30sVS5jbGFzc2VzLGUuY2xhc3NlcyksaWRzOmMoe30sVS5pZHMsZS5pZHMpLHBvc2l0aW9uczpjKHt9LFUucG9zaXRpb25zLGUucG9zaXRpb25zKX0pfSxtPXsxOlUuY2xhc3Nlcy5iYWNrZ3JvdW5kU3VjY2VzcyxzdWNjZXNzOlUuY2xhc3Nlcy5iYWNrZ3JvdW5kU3VjY2VzcywyOlUuY2xhc3Nlcy5iYWNrZ3JvdW5kV2FybmluZyx3YXJuaW5nOlUuY2xhc3Nlcy5iYWNrZ3JvdW5kV2FybmluZywzOlUuY2xhc3Nlcy5iYWNrZ3JvdW5kRXJyb3IsZXJyb3I6VS5jbGFzc2VzLmJhY2tncm91bmRFcnJvciw0OlUuY2xhc3Nlcy5iYWNrZ3JvdW5kSW5mbyxpbmZvOlUuY2xhc3Nlcy5iYWNrZ3JvdW5kSW5mbyw1OlUuY2xhc3Nlcy5iYWNrZ3JvdW5kTmV1dHJhbCxuZXV0cmFsOlUuY2xhc3Nlcy5iYWNrZ3JvdW5kTmV1dHJhbH0sQj1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFUuaWRzLm92ZXJsYXkpO2Uuc3R5bGUub3BhY2l0eT0wLHAoVS50cmFuc2l0aW9uRHVyYXRpb24pLnRoZW4oZnVuY3Rpb24oKXtlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKX0pfSxKPXQuaGlkZUFsZXJ0cz1mdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFUuY2xhc3Nlcy5hbGVydCk7aWYodC5sZW5ndGgpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcz10W25dO18ocy5pZCxzLnBvc2l0aW9uKX1lJiZwKFUudHJhbnNpdGlvbkR1cmF0aW9uKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUoKX0pfX0sbD10LmFsZXJ0PWZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxuPXZvaWQgMD09PXQ/NDp0LHM9ZS50ZXh0LGE9ZS50aW1lLGk9dm9pZCAwPT09YT9VLmFsZXJ0VGltZTphLGM9ZS5zdGF5LG89dm9pZCAwIT09YyYmYyxyPWUucG9zaXRpb24sbD12b2lkIDA9PT1yP1UucG9zaXRpb25zLmFsZXJ0fHxsLnRvcDpyO2ooKSxKKCk7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdT1OKCk7ZC5pZD11LGQucG9zaXRpb249bCxkLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLnRleHRib3gpLGQuY2xhc3NMaXN0LmFkZChtW25dKSxkLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmFsZXJ0KSxkLmlubmVySFRNTD0nPGRpdiBjbGFzcz0iJytVLmNsYXNzZXMudGV4dGJveElubmVyKyciPicrcysiPC9kaXY+IixkLm9uY2xpY2s9ZnVuY3Rpb24oKXtyZXR1cm4gXyh1LGwpfSxkLmxpc3RlbmVyPWZ1bmN0aW9uKGUpeyhQKGUpfHxGKGUpKSYmSigpfSxZKGQsbCksaSYmaTwxJiYoaT0xKSwhbyYmaSYmcChpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIF8odSxsKX0pfSxkPXQuZm9yY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnR5cGUscz12b2lkIDA9PT1uPzU6bixhPWUudGV4dCxpPWUuYnV0dG9uVGV4dCxjPXZvaWQgMD09PWk/Ik9LIjppLG89ZS5jYWxsYmFjayxyPWUucG9zaXRpb24sbD12b2lkIDA9PT1yP1UucG9zaXRpb25zLmZvcmNlfHxsLnRvcDpyO2ooKSxKKCk7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdT1OKCk7ZC5pZD11O3ZhciBwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3AuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMudGV4dGJveCkscC5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5iYWNrZ3JvdW5kSW5mbykscC5pbm5lckhUTUw9JzxkaXYgY2xhc3M9IicrVS5jbGFzc2VzLnRleHRib3hJbm5lcisnIj4nK2ErIjwvZGl2PiI7dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zi5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5idXR0b24pLGYuY2xhc3NMaXN0LmFkZChtW3NdKSxmLmlubmVySFRNTD1jLGYub25jbGljaz1mdW5jdGlvbigpe18odSxsKSxCKCksbz9vKCk6dCYmdCgpfSxkLmFwcGVuZENoaWxkKHApLGQuYXBwZW5kQ2hpbGQoZiksZC5saXN0ZW5lcj1mdW5jdGlvbihlKXtQKGUpJiZmLmNsaWNrKCl9LFkoZCxsKSx6KCl9LHU9dC5jb25maXJtPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcz1lLnRleHQsYT1lLnN1Ym1pdFRleHQsaT12b2lkIDA9PT1hPyJZZXMiOmEsYz1lLmNhbmNlbFRleHQsbz12b2lkIDA9PT1jPyJDYW5jZWwiOmMscj1lLnN1Ym1pdENhbGxiYWNrLGw9ZS5jYW5jZWxDYWxsYmFjayxkPWUucG9zaXRpb24sdT12b2lkIDA9PT1kP1UucG9zaXRpb25zLmNvbmZpcm18fHUudG9wOmQ7aigpLEooKTt2YXIgcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxmPU4oKTtwLmlkPWY7dmFyIG09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bS5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy50ZXh0Ym94KSxtLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmJhY2tncm91bmRJbmZvKSxtLmlubmVySFRNTD0nPGRpdiBjbGFzcz0iJytVLmNsYXNzZXMudGV4dGJveElubmVyKyciPicrcysiPC9kaXY+Ijt2YXIgdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt2LmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmJ1dHRvbiksdi5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5lbGVtZW50SGFsZiksdi5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5iYWNrZ3JvdW5kU3VjY2Vzcyksdi5pbm5lckhUTUw9aSx2Lm9uY2xpY2s9ZnVuY3Rpb24oKXtfKGYsdSksQigpLHI/cigpOnQmJnQoKX07dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yi5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5idXR0b24pLGIuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuZWxlbWVudEhhbGYpLGIuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYmFja2dyb3VuZEVycm9yKSxiLmlubmVySFRNTD1vLGIub25jbGljaz1mdW5jdGlvbigpe18oZix1KSxCKCksbD9sKCk6biYmbigpfSxwLmFwcGVuZENoaWxkKG0pLHAuYXBwZW5kQ2hpbGQodikscC5hcHBlbmRDaGlsZChiKSxwLmxpc3RlbmVyPWZ1bmN0aW9uKGUpe1AoZSk/di5jbGljaygpOkYoZSkmJmIuY2xpY2soKX0sWShwLHUpLHoocCx1KX07dC5pbnB1dD1pO3ZhciBmPXQuc2VsZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50ZXh0LHM9ZS5jYW5jZWxUZXh0LGE9dm9pZCAwPT09cz8iQ2FuY2VsIjpzLGk9ZS5jYW5jZWxDYWxsYmFjayxyPWUuY2hvaWNlcyxjPWUucG9zaXRpb24sbD12b2lkIDA9PT1jP1UucG9zaXRpb25zLnNlbGVjdHx8bC50b3A6YztqKCksSigpO3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHU9TigpO2QuaWQ9dTt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtvLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLnRleHRib3gpLG8uY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYmFja2dyb3VuZEluZm8pLG8uaW5uZXJIVE1MPSc8ZGl2IGNsYXNzPSInK1UuY2xhc3Nlcy50ZXh0Ym94SW5uZXIrJyI+JytuKyI8L2Rpdj4iLGQuYXBwZW5kQ2hpbGQobyksci5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50eXBlLHM9dm9pZCAwPT09bj8xOm4sYT1lLnRleHQsaT1lLmhhbmRsZXIsYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtjLmNsYXNzTGlzdC5hZGQobVtzXSksYy5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5idXR0b24pLGMuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuc2VsZWN0Q2hvaWNlKTt2YXIgbz1yW3QrMV07byYmIW8udHlwZSYmKG8udHlwZT0xKSxvJiZvLnR5cGU9PT1zJiZjLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLnNlbGVjdENob2ljZVJlcGVhdGVkKSxjLmlubmVySFRNTD1hLGMub25jbGljaz1mdW5jdGlvbigpe18odSxsKSxCKCksaSgpfSxkLmFwcGVuZENoaWxkKGMpfSk7dmFyIHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cC5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5iYWNrZ3JvdW5kTmV1dHJhbCkscC5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5idXR0b24pLHAuaW5uZXJIVE1MPWEscC5vbmNsaWNrPWZ1bmN0aW9uKCl7Xyh1LGwpLEIoKSxpP2koKTp0JiZ0KCl9LGQuYXBwZW5kQ2hpbGQocCksZC5saXN0ZW5lcj1mdW5jdGlvbihlKXtGKGUpJiZwLmNsaWNrKCl9LFkoZCxsKSx6KGQsbCl9LHY9dC5kYXRlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcz1lLnZhbHVlLGE9dm9pZCAwPT09cz9uZXcgRGF0ZTpzLGk9ZS5zdWJtaXRUZXh0LGM9dm9pZCAwPT09aT8iT0siOmksbz1lLmNhbmNlbFRleHQscj12b2lkIDA9PT1vPyJDYW5jZWwiOm8sbD1lLnN1Ym1pdENhbGxiYWNrLGQ9ZS5jYW5jZWxDYWxsYmFjayx1PWUucG9zaXRpb24scD12b2lkIDA9PT11P1UucG9zaXRpb25zLmRhdGV8fHAudG9wOnU7aigpLEooKTtmdW5jdGlvbiBmKGUpe0wuaW5uZXJIVE1MPVUuZGF0ZU1vbnRoc1tlLmdldE1vbnRoKCldLGcuaW5uZXJIVE1MPWUuZ2V0RGF0ZSgpLGguaW5uZXJIVE1MPWUuZ2V0RnVsbFllYXIoKX1mdW5jdGlvbiBtKGUpe2YoYSl9ZnVuY3Rpb24gdihlKXt2YXIgdD1uZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpK2UrMSwwKS5nZXREYXRlKCk7YS5nZXREYXRlKCk+dCYmYS5zZXREYXRlKHQpLGEuc2V0TW9udGgoYS5nZXRNb250aCgpK2UpLGYoYSl9ZnVuY3Rpb24gYihlKXthLnNldERhdGUoYS5nZXREYXRlKCkrZSksZihhKX1mdW5jdGlvbiB4KGUpe2EuZ2V0RnVsbFllYXIoKStlPDA/YS5zZXRGdWxsWWVhcigwKTphLnNldEZ1bGxZZWFyKGEuZ2V0RnVsbFllYXIoKStlKSxmKGEpfXZhciB5PSImIzk2NjIiLEw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGs9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksQz1OKCk7ay5pZD1DO3ZhciBFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO0UuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYmFja2dyb3VuZEluZm8pO3ZhciBUPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO1QuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuZGF0ZVNlbGVjdG9ySW5uZXIpO3ZhciBNPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO00uY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYnV0dG9uKSxNLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmVsZW1lbnRUaGlyZCksTS5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5kYXRlU2VsZWN0b3JVcCksTS5pbm5lckhUTUw9eTt2YXIgSD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtILmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmJ1dHRvbiksSC5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5lbGVtZW50VGhpcmQpLEguY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuZGF0ZVNlbGVjdG9yVXApLEguaW5uZXJIVE1MPXk7dmFyIFM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Uy5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5idXR0b24pLFMuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuZWxlbWVudFRoaXJkKSxTLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmRhdGVTZWxlY3RvclVwKSxTLmlubmVySFRNTD15LEwuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuZWxlbWVudCksTC5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5lbGVtZW50VGhpcmQpLEwuaW5uZXJIVE1MPVUuZGF0ZU1vbnRoc1thLmdldE1vbnRoKCldLGcuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuZWxlbWVudCksZy5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5lbGVtZW50VGhpcmQpLGcuc2V0QXR0cmlidXRlKCJjb250ZW50RWRpdGFibGUiLCEwKSxnLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixmdW5jdGlvbihlKXt2YXIgdD1uZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpKzEsMCkuZ2V0RGF0ZSgpLG49ZS50YXJnZXQudGV4dENvbnRlbnQucmVwbGFjZSgvXjArLywiIikucmVwbGFjZSgvW15cZF0vZywiIikuc2xpY2UoMCwyKTtOdW1iZXIobik+dCYmKG49dC50b1N0cmluZygpKSxlLnRhcmdldC50ZXh0Q29udGVudD1uLE51bWJlcihuKTwxJiYobj0iMSIpLGEuc2V0RGF0ZShOdW1iZXIobikpfSksZy5hZGRFdmVudExpc3RlbmVyKCJibHVyIixtKSxnLmlubmVySFRNTD1hLmdldERhdGUoKSxoLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmVsZW1lbnQpLGguY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuZWxlbWVudFRoaXJkKSxoLnNldEF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiwhMCksaC5hZGRFdmVudExpc3RlbmVyKCJpbnB1dCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQudGV4dENvbnRlbnQucmVwbGFjZSgvXjArLywiIikucmVwbGFjZSgvW15cZF0vZywiIikuc2xpY2UoMCw0KTtlLnRhcmdldC50ZXh0Q29udGVudD10LGEuc2V0RnVsbFllYXIoTnVtYmVyKHQpKX0pLGguYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsbSksaC5pbm5lckhUTUw9YS5nZXRGdWxsWWVhcigpO3ZhciB3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3cuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYnV0dG9uKSx3LmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmVsZW1lbnRUaGlyZCksdy5pbm5lckhUTUw9eTt2YXIgTz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtPLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmJ1dHRvbiksTy5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5lbGVtZW50VGhpcmQpLE8uaW5uZXJIVE1MPXk7dmFyIEE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7QS5jbGFzc0xpc3QuYWRkKFUuY2xhc3Nlcy5idXR0b24pLEEuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuZWxlbWVudFRoaXJkKSxBLmlubmVySFRNTD15LE0ub25jbGljaz1mdW5jdGlvbigpe3JldHVybiB2KDEpfSxILm9uY2xpY2s9ZnVuY3Rpb24oKXtyZXR1cm4gYigxKX0sUy5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHgoMSl9LHcub25jbGljaz1mdW5jdGlvbigpe3JldHVybiB2KC0xKX0sTy5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIGIoLTEpfSxBLm9uY2xpY2s9ZnVuY3Rpb24oKXtyZXR1cm4geCgtMSl9O3ZhciBEPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO0QuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYnV0dG9uKSxELmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmVsZW1lbnRIYWxmKSxELmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmJhY2tncm91bmRTdWNjZXNzKSxELmlubmVySFRNTD1jLEQub25jbGljaz1mdW5jdGlvbigpe18oQyxwKSxCKCksbD9sKGEpOnQmJnQoYSl9O3ZhciBJPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO0kuY2xhc3NMaXN0LmFkZChVLmNsYXNzZXMuYnV0dG9uKSxJLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmVsZW1lbnRIYWxmKSxJLmNsYXNzTGlzdC5hZGQoVS5jbGFzc2VzLmJhY2tncm91bmRFcnJvciksSS5pbm5lckhUTUw9cixJLm9uY2xpY2s9ZnVuY3Rpb24oKXtfKEMscCksQigpLGQ/ZChhKTpuJiZuKGEpfSxULmFwcGVuZENoaWxkKE0pLFQuYXBwZW5kQ2hpbGQoSCksVC5hcHBlbmRDaGlsZChTKSxULmFwcGVuZENoaWxkKEwpLFQuYXBwZW5kQ2hpbGQoZyksVC5hcHBlbmRDaGlsZChoKSxULmFwcGVuZENoaWxkKHcpLFQuYXBwZW5kQ2hpbGQoTyksVC5hcHBlbmRDaGlsZChBKSxFLmFwcGVuZENoaWxkKFQpLGsuYXBwZW5kQ2hpbGQoRSksay5hcHBlbmRDaGlsZChEKSxrLmFwcGVuZENoaWxkKEkpLGsubGlzdGVuZXI9ZnVuY3Rpb24oZSl7UChlKT9ELmNsaWNrKCk6RihlKSYmSS5jbGljaygpfSxZKGsscCkseihrLHApfTt0LmRlZmF1bHQ9e2FsZXJ0OmwsZm9yY2U6ZCxjb25maXJtOnUsaW5wdXQ6aSxzZWxlY3Q6ZixkYXRlOnYsc2V0T3B0aW9uczpyLGhpZGVBbGVydHM6Sn19XSxzLmM9YSxzLmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHMuZD1mdW5jdGlvbihlLHQsbil7cy5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpufSl9LHMubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gcy5kKHQsImEiLHQpLHR9LHMubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0scy5wPSIiLHMocy5zPTApO2Z1bmN0aW9uIHMoZSl7aWYoYVtlXSlyZXR1cm4gYVtlXS5leHBvcnRzO3ZhciB0PWFbZV09e2k6ZSxsOiExLGV4cG9ydHM6e319O3JldHVybiBuW2VdLmNhbGwodC5leHBvcnRzLHQsdC5leHBvcnRzLHMpLHQubD0hMCx0LmV4cG9ydHN9dmFyIG4sYX0sIm9iamVjdCI9PT1iKGkpJiYib2JqZWN0Ij09PWIoZSk/ZS5leHBvcnRzPWEoKToobj1bXSx2b2lkIDA9PT0ocz0iZnVuY3Rpb24iPT10eXBlb2YodD1hKT90LmFwcGx5KGksbik6dCl8fChlLmV4cG9ydHM9cykpfSkuY2FsbChpLHQoMCkoZSkpfV0scy5jPWEscy5pPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxzLmQ9ZnVuY3Rpb24oZSx0LG4pe3MubyhlLHQpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6bn0pfSxzLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHMuZCh0LCJhIix0KSx0fSxzLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHMucD0iIixzKHMucz0xKTtmdW5jdGlvbiBzKGUpe2lmKGFbZV0pcmV0dXJuIGFbZV0uZXhwb3J0czt2YXIgdD1hW2VdPXtpOmUsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gbltlXS5jYWxsKHQuZXhwb3J0cyx0LHQuZXhwb3J0cyxzKSx0Lmw9ITAsdC5leHBvcnRzfXZhciBuLGF9KTs="
      }
  };

chrome.contextMenus.create({
  title: "Stop auto-bumping this tab",
  contexts: ["page"],
  documentUrlPatterns: ["*://disboard.org/*dashboard/servers", "*://disboard.org/*dashboard/servers/", "*://disboard.org/*dashboard/servers?*", "*://disboard.org/*dashboard/servers/?"],
  onclick: (_,tab) => chrome.tabs.executeScript(tab.id, {file: "clear_guild.js"})
});

chrome.webRequest.onBeforeRequest.addListener(
  redirect,
  {urls:["*://disboard.org/js/app.js*"], types:["script"]},
  ["blocking"]
);

function compareVer(a, b) // https://stackoverflow.com/a/53387532/11037661
{
    //treat non-numerical characters as lower version
    //replacing them with a negative number based on charcode of each character
    function fix(s)
    {
        return "." + (s.toLowerCase().charCodeAt(0) - 2147483647) + ".";
    }
    a = ("" + a).replace(/[^0-9\.]/g, fix).split('.');
    b = ("" + b).replace(/[^0-9\.]/g, fix).split('.');
    var c = Math.max(a.length, b.length);
    for (var i = 0; i < c; i++)
    {
        //convert to integer the most efficient way
        a[i] = ~~a[i];
        b[i] = ~~b[i];
        if (a[i] > b[i])
            return 1;
        else if (a[i] < b[i])
            return -1;
    }
    return 0;
};

function checkUpdates(){
  fetch('https://raw.githubusercontent.com/Theblockbuster1/disboard-auto-bump/master/manifest.json', {mode: 'cors'})
  .then(function(response) {
    if (response.ok) return response.text()
    else throw response.status+' - '+response.statusText
  })
  .then(function(text) {
      if(compareVer(JSON.parse(text).version, version) == 1) {
        chrome.notifications.create('', {
          title: 'Update available!',
          message: 'Click here to update.',
          contextMessage: 'https://github.com/Theblockbuster1/disboard-auto-bump',
          iconUrl: '/images/disboard-auto-bump-logo.png',
          requireInteraction: true,
          type: 'basic'
        });
      }
  })
  .catch(function(error) {
    console.error('An error occured while checking for update: '+error);
  });
}

chrome.runtime.onInstalled.addListener(() => {
  chrome.storage.sync.get(['safetymode'], function(data) {
    if (data.safetymode == undefined) chrome.storage.sync.set({safetymode:true});
  });
  checkUpdates();
});

setInterval(function () {
  chrome.storage.sync.get(['updates'], function(data) {
    if (data.updates == true) checkUpdates();
  });
}, 21600000);

chrome.notifications.onClicked.addListener(function(id) {
  chrome.tabs.create({url: "https://github.com/Theblockbuster1/disboard-auto-bump"});
  chrome.notifications.clear(id);
});

chrome.tabs.query({
  url: ["*://disboard.org/*dashboard/servers", "*://disboard.org/*dashboard/servers/", "*://disboard.org/*dashboard/servers?*", "*://disboard.org/*dashboard/servers/?"]
}, function(tabs) {
  tabs.forEach(tab => {
    chrome.tabs.update(tab.id,{autoDiscardable:false});
  });
});

chrome.tabs.onUpdated.addListener({
  url: ["*://disboard.org/*dashboard/servers", "*://disboard.org/*dashboard/servers/", "*://disboard.org/*dashboard/servers?*", "*://disboard.org/*dashboard/servers/?"]
}, function(tabId, changeInfo) {
  if (changeInfo.autoDiscardable == true) chrome.tabs.update(tabId,{autoDiscardable:false});
});

chrome.runtime.onMessage.addListener(function(message, sender) {
  if(message.closeThis) chrome.tabs.remove(sender.tab.id);
});